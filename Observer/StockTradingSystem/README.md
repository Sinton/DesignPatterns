#### ***股票交易系统***

###### **设计问题**
> 设有一股票，其价格在一定范围内波动，股民需要三种报告：股票的当前价格；股票价格的统计分析报告（最低价、最高价、开盘价，收盘价）；股票价格趋势预测。请运用观察者模式，编写上述股票行情程序

###### **问题分析与模式选用**
> 股票交易中的分时图和$k$线图，可以将股票作为一个具体的`Subject`，其中把分时图和$k$线图注册成为该股票主题的`Observer`，当时间发生变动的时候，股票主题通知其`Observer`进行更新操作。

###### **设计方案**
> 1. 首先将主题类`Subject`作为一个`interface`，让不同的主题类分别去实现其不同的主题内容
> 2. 而观察者类就是显示分时图和$k$线图
> 3. 用一个时钟线程每次去更新价格，更新后的价格反应在分时图上
> 4. UML类图如下所示
> ![](http://homework.0x1010.com/screenshot/designpatterns/02-01.png)

###### **运行结果及效果分析**
> - 运行结果
![](http://homework.0x1010.com/screenshot/designpatterns/02-02.png)
![](http://homework.0x1010.com/screenshot/designpatterns/02-03.png)
> - 效果分析
> 以多个时间段为分割点，把随机获取到的价格动态添加到分时图中，当一天的时间过去后，显示这一天的$K$线图

###### **遇到问题**
> 1. 由于项目中使用了第三方扩展包`JFreeChat.jar`，可以直接使用其中的API画分时图，但是由于自己不是很熟悉这个第三方扩展包，以及该扩展包还有些BUG，导致一些具体高级的功能实现不完全
> 2. 画分时图时，使用`JFreeChar`中的动态分时图，导致了主线程和UI线程中两个线程无法保持一致

###### **实验总结**
> 观察者模式的意图是在多个对象之间定义一对多的依赖关系，当一个对象状态发生改变时，会通知依赖它的对象，并根据新状态做出相应的反应